"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3043],{3043:(v,g,s)=>{s.r(g),s.d(g,{HistoriquePageModule:()=>C});var h=s(6895),u=s(433),a=s(5035),d=s(2598),l=s(655),t=s(8256),p=s(8290),f=s(8592);function m(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",12)(1,"ion-label")(2,"h2"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-label")(5,"h2"),t._uU(6),t.qZA()(),t.TgZ(7,"ion-label")(8,"h2"),t._uU(9),t.qZA()(),t.TgZ(10,"ion-label",13)(11,"ion-icon",14),t.NdJ("click",function(){const n=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.delet(n))}),t.qZA()()()}if(2&o){const e=r.$implicit;t.xp6(3),t.Oqu(e.intitul),t.xp6(3),t.Oqu(e.montant),t.xp6(3),t.Oqu(e.type)}}function M(o,r){if(1&o&&(t.TgZ(0,"ion-title",9)(1,"ion-label")(2,"h2",10),t._uU(3),t.qZA()(),t.TgZ(4,"ion-list"),t.YNc(5,m,12,3,"ion-item",11),t.qZA(),t._UZ(6,"br"),t.qZA()),2&o){const e=r.$implicit;t.xp6(3),t.Oqu(e.date1),t.xp6(2),t.Q6J("ngForOf",e.op)}}const P=[{path:"",component:(()=>{class o{constructor(e,i){this.authService=e,this.BdService=i,this.ops1=[],this.a=[],this.i=0,this.n=0,this.t=setInterval(()=>(0,l.mG)(this,void 0,void 0,function*(){let c=localStorage.getItem("operation");(c="1")&&(this.ops1=[],this.ops=yield this.BdService.readDataBase("operation"),this.ops&&this.ops.forEach(n=>{console.log("oooo"),n.user.name==this.user.name&&(console.log("tttt"),this.ops1.push(n))}),localStorage.setItem("operation","0")),this.a=[],this.n=0,this.ops1.forEach(n=>{this.n++,0==this.i&&(this.i=1,this.o={date1:this.date(n.date),date:n.date,op:[]}),n.date.getDate()==this.o.date.getDate()&&n.date.getMonth()==this.o.date.getMonth()&&n.date.getFullYear()==this.o.date.getFullYear()?(this.o.op.push(n),console.log(this.o)):(this.a.push(this.o),this.i=0),this.n==this.ops1.length&&(this.a.push(this.o),this.i=0)}),console.log(this.a)}),1e3),this.ops1=JSON.parse(localStorage.getItem("ops"))}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){this.user=JSON.parse(localStorage.getItem("globalInfo")),this.ops1=[],this.a=[],this.n=0,this.ops=yield this.BdService.readDataBase("operation"),this.ops.forEach(e=>{console.log("oooo"),e.user.name==this.user.name&&(console.log("tttt"),this.ops1.push(e))}),this.ops1.forEach(e=>{this.n++,0==this.i&&(this.i=1,this.o={date1:this.date(e.date),date:e.date,op:[]}),e.date.getDate()==this.o.date.getDate()&&e.date.getMonth()==this.o.date.getMonth()&&e.date.getFullYear()==this.o.date.getFullYear()?(this.o.op.push(e),console.log(this.o)):(this.a.push(this.o),this.i=0),this.n==this.ops1.length&&(this.a.push(this.o),this.i=0)}),console.log(this.a)})}date(e){let i=" ";return 0==e.getDay()&&(i+=" Dimanche"),1==e.getDay()&&(i+=" Lundi"),2==e.getDay()&&(i+=" Mardi"),3==e.getDay()&&(i+=" Mercredi"),4==e.getDay()&&(i+=" Jeudi"),5==e.getDay()&&(i+=" Vendredi"),6==e.getDay()&&(i+=" Samedi"),i=i+" "+e.getDate(),0==e.getMonth()&&(i+=" janvier"),1==e.getMonth()&&(i+=" f\xe9vrier"),2==e.getMonth()&&(i+=" Mars"),3==e.getMonth()&&(i+=" avril"),4==e.getMonth()&&(i+=" Mai"),5==e.getMonth()&&(i+=" juin"),6==e.getMonth()&&(i+="\tjuillet"),7==e.getMonth()&&(i+="\tao\xfbt"),8==e.getMonth()&&(i+=" septembre"),9==e.getMonth()&&(i+=" octobre"),10==e.getMonth()&&(i+=" novembre"),11==e.getMonth()&&(i+=" d\xe9cembre"),i}delet(e){return(0,l.mG)(this,void 0,void 0,function*(){console.log("delete",e,this.user),"Entrer"==e.type?(console.log("simo"),this.BdService.reduceBudjet(e.montant,this.user),this.user.budget=this.user.budget-e.montant,localStorage.setItem("globalInfo",JSON.stringify(this.user))):(console.log("tedom"),this.BdService.addBudjet(e.montant,this.user),this.user.budget=this.user.budget+e.montant,localStorage.setItem("globalInfo",JSON.stringify(this.user)),console.log("tedom")),yield this.BdService.supp("operation",e),console.log("ddddddddddddddddddd\xc8",e),this.ops1=[],this.ops=yield this.BdService.readDataBase("operation"),this.ops&&this.ops.forEach(i=>{console.log("oooo"),i.user.name==this.user.name&&(console.log("tttt"),this.ops1.push(i))})})}logout(){this.authService.logout()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.$),t.Y36(f.G))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-historique"]],decls:16,vars:3,consts:[["slot","start","fill","clear"],["fill","clear",3,"click"],["slot","icon-only","name","log-out"],["slot","end","fill","clear"],[1,"profile"],[1,"head"],[1,"initial"],[1,"main-containt"],["class","main-title",4,"ngFor","ngForOf"],[1,"main-title"],[1,"main-h2"],["class","tab",4,"ngFor","ngForOf"],[1,"tab"],["slot","end",1,"delete"],["slot","end","name","close",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-button",0)(3,"ion-button",1),t.NdJ("click",function(){return i.logout()}),t._UZ(4,"ion-icon",2),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6),t.qZA(),t.TgZ(7,"ion-button",3)(8,"div",4),t._uU(9),t.qZA()()()(),t.TgZ(10,"ion-content")(11,"div",5)(12,"p",6),t._uU(13," Consultez votre historique d'entree / sortie "),t.qZA()(),t.TgZ(14,"div",7),t.YNc(15,M,7,2,"ion-title",8),t.qZA()()),2&e&&(t.xp6(6),t.Oqu(i.user.name),t.xp6(3),t.hij(" ",i.user.name.charAt(0).toUpperCase()," "),t.xp6(6),t.Q6J("ngForOf",i.a))},dependencies:[h.sg,a.YG,a.W2,a.Gu,a.gu,a.Ie,a.Q$,a.q_,a.wd,a.sr],styles:["tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:gray}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#fff}tr[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{background-color:#6c63ac;width:100%;padding:10px}thead[_ngcontent-%COMP%], tfoot[_ngcontent-%COMP%]{color:#fff}.head[_ngcontent-%COMP%]{padding:5px 10px;background-color:rgba(108,99,172,.78);color:#fff;text-transform:uppercase;font-size:1.5em;display:flex;justify-content:center;align-items:center;margin:20px 20px 40px;border-radius:10px}.main-containt[_ngcontent-%COMP%]{margin:0%}.main-containt[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   .main-h2[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:600}.main-containt[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{--padding: 0px;font-size:16px}.main-containt[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{padding:0%;--color: #6c63acc7;--transition: background-color 15ms linear}.main-containt[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{--padding:0px}.main-containt[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{--color: red;font-size:15px}.tab[_ngcontent-%COMP%]{margin:20px 20px 40px}.error[_ngcontent-%COMP%]{color:red;font-size:1.4em;text-align:center}.profile[_ngcontent-%COMP%]{width:40px;height:40px;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;background-color:#6c63ac}"]}),o})()}];let O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(P),d.Bz]}),o})(),C=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,u.u5,a.Pc,O]}),o})()}}]);